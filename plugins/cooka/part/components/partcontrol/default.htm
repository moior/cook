
<style>
    .table td, .table th {font-size:10pt;}

    /*좌우로쫙 이미지 펼치기*/
    .justify-image{ text-align: justify;}
    .justify-image figure {display:inline-block;}
    .justify-image:after{content:""; display: inline-block; width: 100%; height: 0;}

    .thumbnail-wrapper{
        max-width: 24%;
        height: 150px;
        overflow: hidden;
        position:relative;
        margin:0px;
    }
    figcaption {text-align:center;        background-color:#e3e3e3;
    }

    .sample_image {
        max-width: 100%;
        max-height: 127px;
        height: auto;

    }


</style>

<script>
function form새부품체크() { /*폼 넘기기 전 실행*/
    if(  $("#input부품가격").val() && $("#input부품이름").val() ) {
        $("#form새부품").submit();
    }
}
$(document).ready(function(){

    var isMobile = true;
    if($(window).innerWidth() >= 760) {
        isMobile = false;
    }
    /*따라다니는 메뉴*/
    if(isMobile == false){
    }

    $(".each부품").dblclick(function(){
        $("#table부품정보수정 input").val("");
        $("#table부품정보수정 input[name=title]").val( $(this).find(".td제목").text()  );
        $("#table부품정보수정 input[name=name]").val( $(this).find(".td이름").text()  );
        $("#table부품정보수정 input[name=value]").val( $(this).find(".td가격").text()  );
        $("#table부품정보수정 input[name=comment]").val( $(this).find(".td코멘트").text()  );
        $("#table부품정보수정 input[name=ord]").val( $(this).data("ord")  );
        $("#table부품정보수정 input[name=part_id]").val( $(this).data("part_id")  ); // edit, del 폼에 둘다 들어감
        $("#table부품정보수정").show().insertAfter( $(this) );
    });
    $("#btn부품삭제").click(function(){
        if(confirm("부품 하나를 삭제합니다")){
            $("#form부품정보삭제").submit();
        }
    })
})
</script>
<div class="justify-image">

    <h5>부품 <small style="font-size:0.4em;">시세에 맞게 실시간 변경해주세요.</small></h5>
    <div>
        <!--<a class="btn btn-default btn-xs" onclick="location.href='?all=true'">모두</a>-->
        <a class="btn btn-default btn-xs" onclick="location.href='?title=제본-무선'">제본-무선</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=제본-스프링'">제본-스프링</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=제본-중철'">제본-중철</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=제본-양장'">제본-양장</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=용지-국전'">용지-국전</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=용지-46절'">용지-46절</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=인쇄'">인쇄</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=박'">박</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=코팅'">코팅</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=합지'">합지</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=라벨스틱'">라벨스틱</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=라운딩'">라운딩</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=포장'">포장</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=디자인'">디자인</a>
        <a class="btn btn-default btn-xs" onclick="location.href='?title=배송'">배송</a>
    </div>
    <style>
        .td제목 {}
        .td이름 {width:195px;}
        .td가격 {width:90px;}
        .td가격 input {text-align:right;}
    </style>
    <table id="" class="table table-condensed  ">
    <tr>
        <td>
            <table style="width:100%;">
                <th class="td제목">분류</th>
                <th class="td이름" style="">이름</th>
                <th class="td가격" style="">가격(수치)</th>
            </table>
        </td>

    </tr>

    {% for part in parts %}
        <tr>
            <td>
            <table style="width:100%;" class="each부품"
                    data-ord="{{ part.ord }}"
                    data-part_id="{{ part.id }}">
            <tr class="tr부품">
                <td><small style="color:#bcbcbc;">{{ part.ord }}</small>
                    <span class="td제목">{{ part.title }}</span></td>
                <td class="td이름">{{ part.name }}</td>
                <td class="td가격">{{ part.value|number_format }}</td>
            </tr>
            <tr class="tr부품" data-part_id="{{ part.id }}">
                <td></td>
                <td colspan="2" class="td코멘트"><small>{{ part.comment }}</small></td>
            </tr>

            </table>
            </td>
        </tr>
    {% endfor %}
    </table>

    {% if not parts %}
    <div style="text-align:center;margin:150px 0;">카테고리를 골라주세요</div>
    {% endif %}

    <div id="table부품정보수정" style="position:absolute;display:none;">
        {{ form_ajax('PartControl::onEditPart',{
        id: "form부품정보수정",
        success :"$(\"<div style='position:absolute;font-size:20px;padding:10px;bottom:0px;left:0px;width:100%;text-align:center;background-color:gold;color:gray;z-index:99999;' >저장되었습니다.</div>\").insertBefore('#form부품정보수정').fadeOut(2500);",
        }) }}
        <input type="hidden" name="part_id" value="" />
        <table class="table table-condensed" style="background-color:#d6d6d3;margin-bottom:1px;">
            <tr class="">
                <td ><b>정보수정</b></td>
                <td colspan="2" class="text-right">
                    <a class="btn btn-default btn-xs" onclick="$('#table부품정보수정').hide();">닫기</a>
                    <button type="submit" class="btn btn-primary btn-xs" id="btn부품수정">저장</button>
                </td>
            </tr>
            <tr class="">
                <td><input type="text" name="title" value="" class="form-control input-sm" placeholder="분류" /></td>
                <td><input type="text" name="name" value="" class="form-control input-sm" placeholder="이름" /></td>
                <td><input type="text" name="value" value="" class="form-control input-sm" placeholder="가격" /></td>
            </tr>
            <tr>
                <td><input type="text" name="ord" value="" class="form-control input-sm" placeholder="순서"/></td>
                <td colspan="2"><input type="text" name="comment" value="{{ part.comment }}" class="form-control input-sm" /></td>
            </tr>
        </table>
        {{ form_close() }}

        {{ form_ajax('PartControl::onDelPart',{
        id: "form부품정보삭제",
        success :"$(\"<div style='position:absolute;font-size:20px;padding:10px;bottom:0px;left:0px;width:100%;text-align:center;background-color:gold;color:gray;z-index:99999;'>삭제되었습니다.</div>\").insertBefore('#form부품정보수정').fadeOut(2500);",
        }) }}
        <div  style="background-color:#b9b9b6;padding:5px;">
            <input type="hidden" name="part_id" value="" />
            <button type="button" class="btn btn-link btn-xs" id="btn부품삭제">Del</button>
        </div>
        {{ form_close() }}
    </div>




    <div>
        <small>* 내지의 경우, 100장이 넘어가면 수량에 따른 할증이 있음... 기본 가격은 내지 100장일때.
            (이부분을 조정하려면 전화바랍니다)</small>
    </div>




    <div>
        <a class="btn btn-xs btn-default" id="btn부품추가" onclick="$('#div새부품추가').toggle();">
            + (SK만)
        </a>
    </div>
    <div id="div새부품추가" style="display:none;background-color:gold;padding:5px;" class="clearfix">

        {{ form_ajax('PartControl::onAddPart',{
        id: "form새부품",
        success :"alert('저장되었습니다. 새로고침하세요..')",
        }) }}
        <input type="hidden" name="cate" value="종이/노트"/>
        <input type="hidden" name="team_id" value="1"/>

        <input type="text" name="title" value="" placeholder="분류 (ex:표지)" class="form-control"/>
        <input type="text" name="name" value="" id="input부품이름" placeholder="제목/항목명 (ex:무선-A4-100권)"  class="form-control"/>
        <input type="text" name="value" value="" id="input부품가격" placeholder="가격/수치"  class="form-control"/>
        <input type="text" name="ord" value="0" id="input노출순서" placeholder="정렬순서 (ex: 10) 낮으면 위에 나옴."  class="form-control"/>
        <input type="text" name="comment" value="" id="" placeholder="설명"  class="form-control"/>

        <small></small>
        <button type="button" onclick="return form새부품체크();" class="pull-right btn btn btn-primary" data-attach-loading>
            <span class="fa fa-pencil"></span> 저장
        </button>

        {{ form_close() }}

    </div>




</div>


