title = "샘플"
url = "/sample/paper/note/:search?"
layout = "cooking"

[Orders]

[SampleList]
search = "{{:search}}"

[SampleControl]

==
<?php
use Backend\Facades\BackendAuth;

function onInit(){
    $this['search_text'] = $this->param('search');

    /*관리자 로그인이랑, 일반회원 로그인 로직이 완전 다른듯. Admin은 슈퍼유저.*/
    $user = BackendAuth::getUser();
    if ($user && $user->hasAccess('cooka.sample.create')) {
        $this['admin'] = true;
    }else {
        $this['admin'] = false;
    }


}
/*function onQuickOrder(){
    $this['result'] = input('value1') + input('value2');
    return $this->page["result"];
}*/
?>
==
<script>

$(document).ready(function(){

    var isMobile = true;
    if($(window).innerWidth() >= 760) {
        isMobile = false;
    }
    /*따라다니는 메뉴*/
    if(isMobile == false){
    }

    $(".btn_menu, .btn카테고리").click(function(){
        var txt = $.trim($(this).text());
        if(txt == "랜덤" || txt == "홈") txt = "";
        location.href="/sample/paper/note/" + txt;
    });
    $("#form검색").submit(function(){
        location.href="/sample/paper/note/" + $("#input검색창").val();
        return false;
    });
    $(".sample_image").click(function() {

        location= "/sample/detail/" + $(this).data("sample_id");
        /*$(".sample_image").css("border", "");
        $(this).css("border", "3px solid royalblue");

        $("#input_sample_code").val( $(this).data("sample_id") );
        $("#input_sample_name").val( $(this).data("sample_name") )
            .css("border", "1px solid royalblue");

        var url = '/sample-detail/' + $(this).data("sample_id"); //  + '?title=' + $(this).attr("alt") + '&src=' + $(this).attr("src")
        $('#modal예제상세').modal({
            remote : url
        });*/ //remote : '/sample-detail/paper/note?title=' + $(this).attr("alt")
    });
    /*모달 매번 다시 부름.*/
    $(document).on('hidden.bs.modal', function (e) {
        $(e.target).removeData('bs.modal');
    });
    $(document).on('click', '.btnSelectSample', function () {
        //  data-dismiss="modal" 으로 모달 닫은 후,
        $("#input_client_tel").focus();
    });

})
</script>
<style>
    div, p {font-size:10pt;}
    .btn_menu {cursor:pointer;}

    #div상단배너 {
        border-bottom:1px dotted #ccc;margin-bottom:20px;
        height:80px; background-repeat: no-repeat; background-size: contain;
        background-image:url('{{ "assets/images/cook/site/타이틀배너-노트샘플.jpg"|theme }}');}
    #div카테고리버튼들 .row {margin-bottom:10px;}
    .title카테고리버튼 {font-weight:bold;color: #7a7a7a;}
    /*눌러지는 3D btn*/
    #div카테고리버튼들 .btn:active {
        transform: translate(0px, 5px);
        -webkit-transform: translate(0px, 5px);
        box-shadow: 0px 1px 0px 0px;
    }
    #div카테고리버튼들 .btn {font-weight:bold;color:white;margin-top:5px;margin-bottom:5px;}

    .btn-gray {        background-color: #b9b5b9;        box-shadow: 0px 5px 0px 0px #9d9a9c;    }
    .btn-gray:hover {        background-color: #d6cdd5;    }
    .btn-blue {        background-color: #55acee;        box-shadow: 0px 5px 0px 0px #3C93D5;    }
    .btn-blue:hover {        background-color: #6FC6FF;    }
    .btn-green {        background-color: #2ecc71;        box-shadow: 0px 5px 0px 0px #15B358;    }
    .btn-green:hover {        background-color: #48E68B;    }
    .btn-red {        background-color: #e74c3c;        box-shadow: 0px 5px 0px 0px #CE3323;    }
    .btn-red:hover {        background-color: #FF6656;    }
    .btn-purple {        background-color: #9b59b6;        box-shadow: 0px 5px 0px 0px #82409D;    }
    .btn-purple:hover {        background-color: #B573D0;    }
    .btn-orange {        background-color: #e67e22;        box-shadow: 0px 5px 0px 0px #CD6509;    }
    .btn-orange:hover {        background-color: #FF983C;    }
    .btn-yellow {       background-color: #f1c40f;        box-shadow: 0px 5px 0px 0px #D8AB00;  }
    .btn-yellow:hover {        background-color: #FFDE29;    }
</style>


<div class="container ">
    <div class="row">  <!--row class 할때마다 마진 15 사라짐.-->

    <div class="col-sm-4" id="" style="">

        <h5>{{ text_menu }}</h5>
        <div class="well" >
            <div class="row" style="margin-bottom:15px;">
                <div class="col-xs-12 text-center">
                        <span type="" class="" style="font-weight:bold;color:#6c6c6c;font-size:16pt;
                            font-family:'Futura, Helvetica'">
                            Samples
                        </span>
                </div>
                <div class="col-xs-10 col-xs-offset-1">
                    <div class="row">
                        <form id="form검색">
                            <div class="input-group">

                                <input type="text" placeholder="키워드 검색" id="input검색창" class="text-center form-control"
                                    value="{{ search_text }}" />
                                <span class="input-group-btn">

                                        <button type="submit" id="btn검색버튼" class="btn btn-default">
                                            <span class="fa fa-search"></span>
                                        </button>
                                    </span>
                            </div>

                        </form>

                    </div>
                </div>
            </div>
            <div id="div카테고리버튼들">

                <div class="row">
                    <div class="col-xs-12">
                        <button type="button" class="btn카테고리 btn btn-xs btn-orange">홈</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-orange">랜덤</button>
                        <!--<button type="button" class="btn btn-xs btn-gray">인기순</button>-->
                        <!--<button type="button" class="btn btn-xs btn-gray">표지만</button>-->
                        <!--<button type="button" class="btn btn-xs btn-gray">내지만</button>-->
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12 ">
                        <span type="" class="title카테고리버튼">제본별</span>
                    </div>
                    <div class="col-xs-12">
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">중철</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">무선</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">스프링</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">양장</button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12 ">
                        <span type="" class="title카테고리버튼">업종별</span>
                    </div>
                    <div class="col-xs-12">
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">학원</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">회사</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">연구소</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">공공기관</button>

                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12 ">
                        <span type="" class="title카테고리버튼">용도별</span>
                    </div>
                    <div class="col-xs-12">
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">연습장</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">알림장</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">학습플래너</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">독서기록장</button>
                        <button type="button" class="btn카테고리 btn btn-xs btn-blue">연구노트</button>
                    </div>
                </div>
                <!--<div class="row">
                    <div class="col-xs-2 text-right">
                        <span type="" class="title카테고리버튼">연령별</span>
                    </div>
                    <div class="col-xs-10">
                        <button type="button" class="btn btn-xs btn-blue">유아</button>
                        <button type="button" class="btn btn-xs btn-blue">초등생</button>
                        <button type="button" class="btn btn-xs btn-blue">중고생</button>
                        <button type="button" class="btn btn-xs btn-blue">대학생</button>
                        <button type="button" class="btn btn-xs btn-blue">회사원</button>
                        <button type="button" class="btn btn-xs btn-blue">중장년</button>
                    </div>
                </div>-->

            </div>
        </div>
    </div>

    <div class="col-sm-8" id="col-rightdesk" style="margin-top:20px;">
        <div id="div상단배너" class=" " style="        ">

        </div>

        <!--row class 할때마다 마진 15 사라짐.-->
        <div class="row" id="" style="padding:0px 4px;">
            {% component "SampleList" %}
        </div>

    </div>

    </div>

</div>

<div class="modal fade" id="modal예제상세" tabindex="-1" role="dialog"><!--control-popup -->
    <div class="modal-dialog">
        <div class="modal-content">
            <p style="margin:20px;">loading...</p>
        </div>
    </div>
</div>




{% if admin %}
<div class="container" style="padding:10px;">
    {{ form_open({ request: 'SampleControl::onCreateSample', files : true }) }}
    <h3>새 샘플 입력</h3>
    <p style="color:darkred">관리자만 가능합니다. (만약 관리자가 아닌데 이 글이 보인다면, 알려주세요 ^.^)</p>
    <input type="text" name="cate" class="form-control" value="종이/노트" placeholder="대분류 (종이/노트 고정)" readonly />
    <input type="text" name="title" class="form-control" placeholder="노출 제목 (시스코 업무노트 식)" />
    <input type="text" name="menu" class="form-control" placeholder="메뉴 (학원-수학 or 업무노트)" />


    <textarea name="spec" class="form-control" placeholder="스펙" style="height:150px;"></textarea>
    <textarea name="comment" class="form-control" placeholder="상세설명(코멘트)" style="height:150px;"></textarea>

    <div class="col-xs-6"><input type="file" name="sample_images[]" class="form-control" accept="image/*,capture=camera" placeholder=".." /></div>
    <div class="col-xs-6"><input type="file" name="sample_images[]" class="form-control" accept="image/*,capture=camera" placeholder=".." /></div>
    <div class="col-xs-6"><input type="file" name="sample_images[]" class="form-control" accept="image/*,capture=camera" placeholder=".." /></div>
    <div class="col-xs-6"><input type="file" name="sample_images[]" class="form-control" accept="image/*,capture=camera" placeholder=".." /></div>
    <div class="col-xs-6"><input type="file" name="sample_images[]" class="form-control" accept="image/*,capture=camera" placeholder=".." /></div>
    <div class="col-xs-6"><input type="file" name="sample_images[]" class="form-control" accept="image/*,capture=camera" placeholder=".." /></div>
    <div class="col-xs-6"><input type="file" name="sample_images[]" class="form-control" accept="image/*,capture=camera" placeholder=".." /></div>
    <div class="col-xs-6"><input type="file" name="sample_images[]" class="form-control" accept="image/*,capture=camera" placeholder=".." /></div>

    <button type="submit" onclick="" class="btn btn btn-primary" data-attach-loading>저장</button>
    {{ form_close() }}
</div>
{% endif %}